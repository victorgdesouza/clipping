{# templates/newsclip/client_reports.html #}
{% extends "base.html" %}
{% block title %}Relatórios de {{ client.name }}{% endblock %}

{% block content %}
  <h1>Relatórios: {{ client.name }}</h1>

  {# === Formulário para gerar novo relatório === #}
  <h2>Gerar novo relatório</h2>
  <form method="post" action="{% url 'generate_report_view' client.id %}">
    {% csrf_token %}
    {{ form.as_p }}  {# renderiza ‘days’ com todas as opções, inclusive “Relatório Completo” #}
    <button type="submit">Gerar relatório</button>
  </form>

  {# === Lista de relatórios disponíveis === #}
  <h2>Relatórios já gerados</h2>
  <ul>
    {% for fname in files %}
      <li>
        <a href="{% url 'download_report' client.id fname %}">
          {{ fname }}
        </a>
      </li>
    {% empty %}
      <li>Sem relatórios gerados ainda.</li>
    {% endfor %}
  </ul>

  {# === Navegação de volta === #}
  <p style="margin-top:1em;">
    <a class="button" href="{% url 'client_news' client.id %}">← Voltar às notícias</a>
    <a class="button" href="{% url 'dashboard' %}">← Voltar aos clientes</a>
  </p>
{% endblock %}

