{# templates/newsclip/client_reports.html #}
{% extends "base.html" %}
{% block title %}Relatórios de {{ client.name }}{% endblock %}

{% block content %}
  <h1>Relatórios: {{ client.name }}</h1>

  {# Formulário para gerar novo relatório #}
  <form action="{% url 'generate_report_view' client.id %}"
        method="post"
        style="margin-bottom: 1em;">
    {% csrf_token %}
    <label>
      Intervalo:
      <select name="days">
        <option value="15">Últimos 15 dias</option>
        <option value="30" selected>Últimos 30 dias</option>
        <option value="60">Últimos 60 dias</option>
        <option value="90">Últimos 90 dias</option>
      </select>
    </label>
    <label style="margin-left: 1em;">
      Formato:
      <select name="out_format">
        <option value="pdf" selected>PDF</option>
        <option value="xlsx">Excel (.xlsx)</option>
        <option value="csv">CSV</option>
      </select>
    </label>
    <button type="submit" class="button">Gerar relatório</button>
  </form>

  {# Lista de relatórios disponíveis #}
  <ul>
    {% for fname in files %}
      <li>
        <a href="{% url 'download_report' client.id fname %}">
          {{ fname }}
        </a>
      </li>
    {% empty %}
      <li>Sem relatórios gerados ainda.</li>
    {% endfor %}
  </ul>

  <p style="margin-top: 1em;">
    <a class="button" href="{% url 'client_news' client.id %}">
      ← Voltar às notícias
    </a>
    <a class="button" href="{% url 'dashboard' %}">
      ← Voltar aos clientes
    </a>
  </p>
{% endblock %}
